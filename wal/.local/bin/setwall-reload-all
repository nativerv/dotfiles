#!/bin/sh

# Send signals/restart some programs that `wal`
# doesn't restart automativally

# Nvim - send signal
pidof nvim >/dev/null && killall -USR1 nvim

# Dwm - send super+F12 keystroke (dwm must define this as reload hotkey)
pidof dwm >/dev/null && xdotool key super+F12

# Xmonad - call xmonad --reload
# shellcheck disable=2236
pidof xmonad-x86_64-linux >/dev/null && [ ! -z "${1}" ] && xmonad --restart

# Kill and restart telegram-desktop
pidof telegram-desktop >/dev/null && killall telegram-desktop && setsid telegram-desktop -startintray >/dev/null 2>&1 &

# Call pywalfox update
command -v pywalfox >/dev/null 2>&1 && pywalfox update >/dev/null 2>&1 &

# Kill and restart xsettingsd
# xsettingsd as a daemon does not work at all or with firefox specifically
# for some reason; it requires to be run every time gtk theme updates,
# and older instance can recognize that another one was run and kill itself,
# but firefox just don't care, so we kill xsettingsd then run a new one
command -v xsettingsd >/dev/null 2>&1 && pkill xsettingsd >/dev/null 2>&1 && setsid xsettingsd -c "${XDG_CONFIG_HOME}/xsettingsd/xsettingsd.conf" >/dev/null 2>&1
