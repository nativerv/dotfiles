#!/bin/sh

set -ue

copy () {
  xclip -in -selection clipboard -t "${mime_type}"
}

# If text is piped
if [ "${#}" = 0 ]; then
  mime_type='text/plain'
  copy
  exit 0
fi

mime_type="$(file --mime-type -b "${1}")"

# If filename is provided
case "${mime_type}" in
  image/png)
    copy < "${1}"
    ;; 
  image/*) 
    mime_type='image/png'
    convert "${1}" png:- | copy
    ;;
  *)
    copy < "${1}"
    ;;
esac

